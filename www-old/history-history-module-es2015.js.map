{"version":3,"sources":["./src/app/history/history.page.html","./src/app/history/history-routing.module.ts","./src/app/history/history.module.ts","./src/app/history/history.page.scss","./src/app/history/history.page.ts","./src/app/pipes/date-format.pipe.ts"],"names":[],"mappings":"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","file":"history-history-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>History</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item (click)=\\\"openActionSheet($event, c.fastStartTime, c._id)\\\" style=\\\"background-color: lightgray; height:13.5%;\\\" *ngFor=\\\"let c of completedFasts\\\">\\n      <!-- <ion-card-header>\\n      <ion-card-title style=\\\"font-size: 1rem;\\\">{{ c.getDetails().fast.getTitle() }}</ion-card-title>\\n      <ion-card-subtitle>{{ c.fastStartTime }}</ion-card-subtitle>\\n    </ion-card-header> -->\\n      <ion-label>\\n        <h2>{{ c.getDetails().fast.getTitle() }}</h2>\\n        <h3>{{ c.fastStartTime | dateFormat }}</h3>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPageRoutingModule } from './history-routing.module';\n\nimport { HistoryPage } from './history.page';\nimport { DateFormatPipe } from '../pipes/date-format.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HistoryPageRoutingModule\n  ],\n  declarations: [HistoryPage, DateFormatPipe]\n})\nexport class HistoryPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hpc3RvcnkvaGlzdG9yeS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ResourcesService } from '../shared/resources.service';\nimport { ActionSheetController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n  \n})\nexport class HistoryPage implements OnInit {\n  private completedFasts: Array<any>;\n  private shouldRefresh: boolean = false;\n  constructor(private resources: ResourcesService, \n              private actionSheetController: ActionSheetController) { }\n\n  ngOnInit() {}\n\n  refreshPage() {\n    this.resources.getCompletedFasts(this.shouldRefresh).then((res) => {\n      this.shouldRefresh = false\n      this.completedFasts = res\n      for(let i = 0; i < this.completedFasts.length; i++) {\n        this.completedFasts[i].formattedStartTime = this.timeUtil(this.completedFasts[i].fastStartTime)\n      }\n    })\n  }\n\n  ionViewWillEnter()  {\n    this.shouldRefresh =  true\n    this.refreshPage()\n    // setTimeout(() => {\n    //   let history = this.resources.getCompletedFasts();\n    //   history.forEach(e => {\n    //     this.completedFasts.push({\n    //       title: e.getDetails().fast.getTitle();\n    //     })\n    //   })\n    //   this.completedFasts = this.resources.getCompletedFasts();\n    // }, 500);\n  }\n\n  async deleteHistory(id) {\n    await this.resources.deleteCompletedFast(id).then(() => {\n      this.shouldRefresh = true\n      this.refreshPage()\n    })\n  }\n  // Name of fast\n  // Date dd/mm/yyyy hh:mm\n  async openActionSheet(event, date, id) {\n    const actionSheet = await this.actionSheetController.create({\n      buttons: [{\n        text: 'Delete',\n        role: 'destructive',\n        icon: 'trash',\n        handler: async () => {\n          await this.deleteHistory(id);\n        }\n      }, {\n        text: 'Cancel',\n        icon: 'close',\n        role: 'cancel',\n        handler: () => {\n          if (this.resources.IS_DEBUG_MODE) console.log('Cancel clicked');\n        }\n      }]\n    });\n    await actionSheet.present();\n  }\n  \n  timeUtil(startTime: Date) {\n    if(!(startTime instanceof Date)) startTime = new Date(startTime)\n    let date = startTime.toLocaleDateString()\n    let time = startTime.toLocaleTimeString()\n    time = time.substring(0,time.length-6) + \" \" + time.substr(time.length-2, 2)\n    return date + \" \" + time\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'dateFormat'\n})\nexport class DateFormatPipe implements PipeTransform {\n\n  transform(value: any, ...args: any[]): any {\n    if (!(value instanceof Date)) value = new Date(value); \n    let date = value.toLocaleDateString()\n    let time = value.toLocaleTimeString()\n    time = time.substring(0,time.length-6) + \" \" + time.substr(time.length-2, 2)\n    return date + \" \" + time;\n  }\n\n}\n"],"sourceRoot":"webpack:///"}