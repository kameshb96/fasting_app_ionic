{"version":3,"sources":["src/app/history/history.page.html","src/app/history/history-routing.module.ts","src/app/history/history.module.ts","src/app/history/history.page.scss","src/app/history/history.page.ts","src/app/pipes/date-format.pipe.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>History</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item (click)=\\\"openActionSheet($event, c.fastStartTime, c._id)\\\" style=\\\"background-color: lightgray; height:13.5%;\\\" *ngFor=\\\"let c of completedFasts\\\">\\n      <!-- <ion-card-header>\\n      <ion-card-title style=\\\"font-size: 1rem;\\\">{{ c.getDetails().fast.getTitle() }}</ion-card-title>\\n      <ion-card-subtitle>{{ c.fastStartTime }}</ion-card-subtitle>\\n    </ion-card-header> -->\\n      <ion-label>\\n        <h2>{{ c.getDetails().fast.getTitle() }}</h2>\\n        <h3>{{ c.fastStartTime | dateFormat }}</h3>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPageRoutingModule } from './history-routing.module';\n\nimport { HistoryPage } from './history.page';\nimport { DateFormatPipe } from '../pipes/date-format.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HistoryPageRoutingModule\n  ],\n  declarations: [HistoryPage, DateFormatPipe]\n})\nexport class HistoryPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hpc3RvcnkvaGlzdG9yeS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ResourcesService } from '../shared/resources.service';\nimport { ActionSheetController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n  \n})\nexport class HistoryPage implements OnInit {\n  private completedFasts: Array<any>;\n  private shouldRefresh: boolean = false;\n  constructor(private resources: ResourcesService, \n              private actionSheetController: ActionSheetController) { }\n\n  ngOnInit() {}\n\n  refreshPage() {\n    this.resources.getCompletedFasts(this.shouldRefresh).then((res) => {\n      this.shouldRefresh = false\n      this.completedFasts = res\n      for(let i = 0; i < this.completedFasts.length; i++) {\n        this.completedFasts[i].formattedStartTime = this.timeUtil(this.completedFasts[i].fastStartTime)\n      }\n    })\n  }\n\n  ionViewWillEnter()  {\n    this.shouldRefresh =  true\n    this.refreshPage()\n    // setTimeout(() => {\n    //   let history = this.resources.getCompletedFasts();\n    //   history.forEach(e => {\n    //     this.completedFasts.push({\n    //       title: e.getDetails().fast.getTitle();\n    //     })\n    //   })\n    //   this.completedFasts = this.resources.getCompletedFasts();\n    // }, 500);\n  }\n\n  async deleteHistory(id) {\n    await this.resources.deleteCompletedFast(id).then(() => {\n      this.shouldRefresh = true\n      this.refreshPage()\n    })\n  }\n  // Name of fast\n  // Date dd/mm/yyyy hh:mm\n  async openActionSheet(event, date, id) {\n    const actionSheet = await this.actionSheetController.create({\n      buttons: [{\n        text: 'Delete',\n        role: 'destructive',\n        icon: 'trash',\n        handler: async () => {\n          await this.deleteHistory(id);\n        }\n      }, {\n        text: 'Cancel',\n        icon: 'close',\n        role: 'cancel',\n        handler: () => {\n          if (this.resources.IS_DEBUG_MODE) console.log('Cancel clicked');\n        }\n      }]\n    });\n    await actionSheet.present();\n  }\n  \n  timeUtil(startTime: Date) {\n    if(!(startTime instanceof Date)) startTime = new Date(startTime)\n    let date = startTime.toLocaleDateString()\n    let time = startTime.toLocaleTimeString()\n    time = time.substring(0,time.length-6) + \" \" + time.substr(time.length-2, 2)\n    return date + \" \" + time\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'dateFormat'\n})\nexport class DateFormatPipe implements PipeTransform {\n\n  transform(value: any, ...args: any[]): any {\n    if (!(value instanceof Date)) value = new Date(value); \n    let date = value.toLocaleDateString()\n    let time = value.toLocaleTimeString()\n    time = time.substring(0,time.length-6) + \" \" + time.substr(time.length-2, 2)\n    return date + \" \" + time;\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"history-history-module-es5.js"}